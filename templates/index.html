{% extends "base.html" %}
{% block content %}
<div class="card">
    <h1 style="margin-bottom: 20px;">Vremea Ã®n Timp Real</h1>
    
   <form method="POST" class="search-box" style="display: flex; justify-content: center; gap: 10px; margin-bottom: 30px;">
    <input type="text" name="city" placeholder="CautÄƒ un oraÈ™..." required class="auth-input" style="width: 60%; margin: 0;" id="cityInput">
    <button type="submit" class="btn">CautÄƒ</button>
</form>

    {% if weather and "error" not in weather %}
    <div style="margin-top: 30px; animation: fadeIn 0.8s ease-out;">
        <img src="{{ weather.icon }}" width="110" alt="icon" style="filter: drop-shadow(0 0 10px rgba(255,255,255,0.2));">
        
        <h2 style="font-size: 64px; margin: 10px 0; font-weight: 800; background: linear-gradient(to right, #fff, var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            {{ weather.temperature }}Â°C
        </h2>
        
        <h3 style="text-transform: uppercase; letter-spacing: 3px; font-weight: 500;">{{ city }}</h3>
        
        <p style="font-style: italic; color: var(--primary); font-size: 1.3rem; margin-bottom: 20px;">
            {{ weather.condition }}
        </p>
        
        <div class="stat-item" style="display: inline-block; padding: 15px 30px; background: rgba(255,255,255,0.05); border-radius: 15px;">
            <p style="margin: 0;"><strong>ðŸ’¡ Sfat:</strong> {{ message }}</p>
        </div>
        
        <div style="margin-top: 30px; display: flex; gap: 15px; justify-content: center;">
            <a href="/more_details/{{ city }}" class="btn" style="padding: 12px 25px;">
                <i class="fas fa-chart-line"></i> Detalii Avansate
            </a>
        </div>
    </div>

    {% elif message %}
    <div class="stat-item" style="margin-top: 20px; border-color: #ff4d4d; background: rgba(255, 77, 77, 0.1);">
        <p style="color: #ff4d4d; margin: 0;"><i class="fas fa-exclamation-circle"></i> {{ message }}</p>
    </div>
    {% endif %}
</div>

<style>

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}


.auth-input {
    background: #ffffff !important;
    color: #000000 !important;
    border: 2px solid var(--primary);
    font-weight: 600;
}
</style>

<script>

const cities = [
    "Abu Dhabi", "Amsterdam", "Ankara", "Athens", "Baghdad", "Baku",
    "Bamako", "Bangkok", "Beijing", "Belgrade", "Berlin", "Bern", "BogotÃ¡", "BrasÃ­lia", "Bratislava", "Brussels",
    "Bucharest", "Budapest", "Cairo", "Canberra", "Caracas", "Casablanca", "Helsinki", "Islamabad", "Jakarta", "Jerusalem",
    "Kabul", "Kampala", "Kathmandu", "Khartoum", "Kigali", "Kingston", "Kinshasa", "Kuala Lumpur", "Kuwait City", "La Paz",
    "Lisbon", "London", "Luanda", "Lusaka", "Madrid", "Malabo", "Managua", "Manila", "Maputo", "Minsk",
    "Moscow", "Muscat", "Nairobi", "New Delhi", "Oslo", "Ottawa", "Paris", "Phnom Penh", "Podgorica", "Port Louis",
    "Port Moresby", "Port-au-Prince", "Porto-Novo", "Prague", "Pretoria", "Pyongyang", "Quito", "Rabat", "Reykjavik", "Riga"
];

const input = document.getElementById("cityInput");

let i = 0;          // index curent
let j = 0;          // index litera curenta
let forward = true; 

function typePlaceholder() {
    const city = cities[i];
    if(forward) {
        j++;
        input.placeholder = `CautÄƒ un oraÈ™ (ex: ${city.slice(0,j)})...`;
        if(j === city.length) {
            forward = false;
            setTimeout(typePlaceholder, 1000); 
            return;
        }
    } else {
        j--;
        input.placeholder = `CautÄƒ un oraÈ™ (ex: ${city.slice(0,j)})...`;
        if(j === 0) {
            forward = true;
            i = (i + 1) % cities.length; 
        }
    }
    setTimeout(typePlaceholder, 150);
}

//start animatie
typePlaceholder();
</script>

{% endblock %}