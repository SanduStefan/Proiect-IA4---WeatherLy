{% extends "base.html" %}
{% block content %}
<div class="card">
    <h1>Vremea Ã®n Timp Real</h1>
    <form method="POST" class="search-box">
        <input type="text" name="city" placeholder="CautÄƒ oraÈ™ul tÄƒu (ex: Paris)..." required>
        <button type="submit" class="btn">CautÄƒ</button>
    </form>

    {% if weather and "error" not in weather %}
    <div style="margin-top: 30px;">
        <img src="{{ weather.icon }}" width="100">
        <h2 style="font-size: 48px; margin: 0;">{{ weather.temperature }}Â°C</h2>
        <h3>{{ city.capitalize() }}</h3>
        <p style="font-style: italic; color: var(--primary);">{{ weather.condition }}</p>
        <p><strong>ðŸ’¡ Sfat:</strong> {{ message }}</p>
        
        <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
            <a href="/more_details/{{ city }}" class="btn">Detalii Avansate</a>
            <button class="btn" style="background: var(--accent);" onclick="askBotAbout('{{ city }}')">
                ÃŽntreabÄƒ Bot-ul de haine
            </button>
        </div>
    </div>
    {% elif message %}
    <p style="color: #ff4d4d; margin-top: 20px;">{{ message }}</p>
    {% endif %}
</div>

<script>
function askBotAbout(cityName) {
    const widget = document.getElementById('chat-widget');
    if (widget.classList.contains('chat-closed')) toggleChat();
    
    document.getElementById('chat-input').value = `Ce haine sa iau in ${cityName}?`;
    sendChat();
}
</script>
{% endblock %}