<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.PNG') }}" type="image/png">
    <meta charset="UTF-8">
    <title>Metric Data - WeatherLy</title>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Leaflet.js -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            color: #fff;
            background: 
                linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
                url("{{ url_for('static', filename='images/bucharest.jpg') }}") no-repeat center center fixed;
            background-size: cover;
        }

        .navbar {
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 45px;
            background: rgba(0, 0, 0, 0.45);
            backdrop-filter: blur(12px);
            box-shadow: 0 10px 35px rgba(0,0,0,0.4);
        }
        .logo { display: flex; align-items: center; gap: 12px; font-size: 1.4em; font-weight: bold; }
        .logo span { font-size: 1.8em; filter: drop-shadow(0 0 6px rgba(255,255,255,0.6)); }
        .menu-buttons { display: flex; gap: 18px; }
        .glow-btn {
            position: relative; padding: 11px 26px; border-radius: 14px; border: none;
            background: rgba(255,255,255,0.18); color: #fff; cursor: pointer; font-size: 0.95em; overflow: hidden;
            transition: all 0.35s ease;
        }
        .glow-btn::before {
            content: ""; position: absolute; inset: 0;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.45), transparent);
            transform: translateX(-120%); transition: transform 0.6s ease;
        }
        .glow-btn:hover::before { transform: translateX(120%); }
        .glow-btn:hover { background: rgba(255,255,255,0.35); transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(0,0,0,0.45); }

        .container { max-width: 1100px; margin: 80px auto; padding: 20px; text-align: center; }
        h1 { font-size: 2.6em; margin-bottom: 10px; }
        .subtitle { font-size: 1.2em; opacity: 0.9; margin-bottom: 50px; }

        .metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)); gap: 28px; }
        .metric-card { background: rgba(0,0,0,0.55); padding: 28px; border-radius: 18px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.35); transition: transform 0.4s ease; }
        .metric-card:hover { transform: translateY(-10px); box-shadow: 0 22px 50px rgba(0,0,0,0.6); }
        .metric-card h3 { margin-bottom: 10px; font-size: 1.1em; opacity: 0.85; }
        .metric-card p { font-size: 1.8em; font-weight: bold; }


        .charts-container { display: flex; gap: 30px; justify-content: center; flex-wrap: wrap; margin-top: 50px; }
        .chart-card { flex: 1 1 45%; background: rgba(0,0,0,0.55); border-radius: 22px; padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4); min-width: 300px; margin-bottom: 30px; }
        .chart-card h3 { margin-bottom: 20px; opacity: 0.85; font-weight: normal; text-align: center; }


        #weatherMap { height: 500px; width: 100%; border-radius: 15px; margin-top: 20px; }

        footer { margin-top: 90px; text-align: center; opacity: 0.7; font-size: 0.9em; }


      
.coords {
    display: flex;
    align-items: center;
    gap: 10px;
    font-family: 'Courier New', monospace;
    font-size: 0.95em;
    letter-spacing: 0.6px;
    opacity: 0;
    animation: coordsIn 1s ease forwards;
}

.coord-item {
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
}

.coord-item strong {
    color: #ffd86b;
}

.coord-sep {
    opacity: 0.5;
}

@keyframes coordsIn {
    from {
        opacity: 0;
        transform: translateY(-6px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.coord-item span,
.coord-item::before {
    animation: floatEmoji 2.5s ease-in-out infinite;
}

@keyframes floatEmoji {
    0% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
    100% { transform: translateY(0); }
}

.coords:hover {
    text-shadow: 0 0 8px rgba(255, 216, 107, 0.6);
    cursor: default;
}

.coords-static {
    padding: 10px 22px;
    border-radius: 14px;
    background: rgba(255,255,255,0.18);
    font-family: 'Courier New', monospace;
    font-size: 0.95em;
    letter-spacing: 0.6px;
    white-space: nowrap;
    box-shadow: 0 6px 18px rgba(0,0,0,0.25);
    transition: background 0.3s ease;
}

.coords-static:hover {
    background: rgba(255,255,255,0.28);
    cursor: default;
}


.coords-static .dot {
    margin: 0 8px;
    opacity: 0.5;
}

.navbar {
    position: sticky;
    top: 0;
    z-index: 100;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    padding: 18px 45px;
    background: rgba(0, 0, 0, 0.45);
    backdrop-filter: blur(12px);
    box-shadow: 0 10px 35px rgba(0,0,0,0.4);
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 1.4em;
    font-weight: bold;
    min-width: 260px; 
}

.logo span {
    font-size: 1.8em;
    filter: drop-shadow(0 0 6px rgba(255,255,255,0.6));
}

.typewriter {
    font-size: 0.85em;
    opacity: 0.85;
    height: 1.1em;
}

.coords-static {
    justify-self: center;
    padding: 10px 22px;
    border-radius: 14px;
    background: rgba(255,255,255,0.18);
    font-family: 'Courier New', monospace;
    font-size: 0.95em;
    letter-spacing: 0.6px;
    white-space: nowrap;
    box-shadow: 0 6px 18px rgba(0,0,0,0.25);
}

.coords-static .dot {
    margin: 0 8px;
    opacity: 0.5;
}


.menu-buttons {
    display: flex;
    justify-self: end;
    gap: 18px;
}

    </style>
</head>
<body>

<!-- NAVBAR -->
<div class="navbar">

    <div class="logo">
        <span>üå¶Ô∏è</span>
        <div class="logo-text">
            <div>WeatherLy</div>
            <div class="typewriter" id="typewriter"></div>
        </div>
    </div>

    <div class="coords-static">
        üìç <strong>LAT</strong> 44.4268
        <span class="dot">‚Ä¢</span>
        üß≠ <strong>LON</strong> 26.1025
    </div>

    <div class="menu-buttons">
        <a href="{{ url_for('home') }}">
            <button class="glow-btn">Home</button>
        </a>
    </div>

</div>


<!-- CONTENT -->
<div class="container">
    <h1>Bucharest Weather Metrics üìä</h1>
    <p class="subtitle">Detailed atmospheric data for Bucure»ôti, updated in real-time.</p>

    <div class="metrics">
        <div class="metric-card"><h3>Temperature</h3><p>{{ metrics.temp_c }}¬∞C</p></div>
        <div class="metric-card"><h3>Feels Like</h3><p>{{ metrics.feelslike_c }}¬∞C</p></div>
        <div class="metric-card"><h3>Condition</h3><p>{{ metrics.condition }}</p></div>
        <div class="metric-card"><h3>Humidity</h3><p>{{ metrics.humidity }}%</p></div>
        <div class="metric-card"><h3>Wind</h3><p>{{ metrics.wind_kph }} kph {{ metrics.wind_dir }}</p></div>
        <div class="metric-card"><h3>Pressure</h3><p>{{ metrics.pressure_mb }} mb</p></div>
        <div class="metric-card"><h3>UV Index</h3><p>{{ metrics.uv }}</p></div>
        <div class="metric-card"><h3>Cloud Coverage</h3><p>{{ metrics.cloud }}%</p></div>
        <div class="metric-card"><h3>Precipitation</h3><p>{{ metrics.precip_mm }} mm</p></div>
        <div class="metric-card"><h3>Visibility</h3><p>{{ metrics.visibility_km }} km</p></div>
    </div>

    <!-- CHARTS -->
    <div class="charts-container">
        <div class="chart-card">
            <h3>Hourly Temperature</h3>
            <canvas id="tempChart"></canvas>
        </div>
        <div class="chart-card">
            <h3>Hourly Wind</h3>
            <canvas id="windChart"></canvas>
        </div>
        <div class="chart-card">
            <h3>Hourly Humidity</h3>
            <canvas id="humidityChart"></canvas>
        </div>
    </div>

    <!-- MAP -->
    <h2>Mapa interactivƒÉ a Rom√¢niei</h2>
    <div id="weatherMap"></div>

    <footer>¬© 2025 WeatherLy ‚Ä¢ Bucharest Edition üåç</footer>
</div>

<!-- TYPEWRITER SCRIPT -->
<script>
const text = "Live metrics ‚Ä¢ Precision data ‚Ä¢ Smart insights";
const el = document.getElementById("typewriter");
let i = 0;
(function type() {
    el.textContent = text.slice(0, i++);
    if (i <= text.length) setTimeout(type, 85);
})();
</script>

{% if metrics %}
<script>

const labels = [...Array(24).keys()].map(h => h + ":00");
const tempData = Array.from({length:24}, () => Math.floor(Math.random()*10+15)); // demo
const windData = Array.from({length:24}, () => Math.floor(Math.random()*15+5));
const humidityData = Array.from({length:24}, () => Math.floor(Math.random()*50+30));

new Chart(document.getElementById('tempChart').getContext('2d'), {
    type: 'line',
    data: { labels: labels, datasets: [{ label: 'Temperature (¬∞C)', data: tempData,
        borderColor: '#1a73e8', backgroundColor: 'rgba(26,115,232,0.3)', fill: true, tension:0.3 }]},
    options: { responsive:true, plugins:{ legend:{ labels:{ color:'#fff' } } },
        scales:{ x:{ ticks:{ color:'#fff' } }, y:{ ticks:{ color:'#fff' } } } }
});

new Chart(document.getElementById('windChart').getContext('2d'), {
    type: 'line',
    data: { labels: labels, datasets: [{ label: 'Wind (kph)', data: windData,
        borderColor: '#00e5ff', fill:false, tension:0.3 }]},
    options: { responsive:true, plugins:{ legend:{ labels:{ color:'#fff' } } },
        scales:{ x:{ ticks:{ color:'#fff' } }, y:{ ticks:{ color:'#fff' } } } }
});

new Chart(document.getElementById('humidityChart').getContext('2d'), {
    type: 'line',
    data: { labels: labels, datasets: [{ label: 'Humidity (%)', data: humidityData,
        borderColor: '#7CFFB2', fill:false, tension:0.3 }]},
    options: { responsive:true, plugins:{ legend:{ labels:{ color:'#fff' } } },
        scales:{ x:{ ticks:{ color:'#fff' } }, y:{ ticks:{ color:'#fff' } } } }
});

const map = L.map('weatherMap').setView([45.9432, 24.9668], 7);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors', maxZoom:18
}).addTo(map);


const cities = [
    { name: 'Bucharest', coords: [44.4268,26.1025], temp: {{ metrics.temp_c }} },
    { name: 'Cluj-Napoca', coords: [46.7712,23.6236], temp: 20 },
    { name: 'Timi»ôoara', coords: [45.7489,21.2087], temp: 18 },
    { name: 'Ia»ôi', coords: [47.1585,27.6014], temp: 16 }
];
cities.forEach(c => {
    L.marker(c.coords).addTo(map)
     .bindPopup(`<b>${c.name}</b><br>Temperatura: ${c.temp}¬∞C`);
});
</script>
{% endif %}

</body>
</html>
